<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>重庆邮电大学ACM协会</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/css.css" rel="stylesheet" />
    <script src="js/jquery-1.9.1.min.js"></script>
    <link href="css/animate.min.css" rel="stylesheet" />
    <script src="layer/layer.js"></script>
    <link rel="stylesheet" href="">
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--<style type="text/css">-->
    <!---->
    <!--</style>-->
</head>

<body>
<div class="header">
    <div class="container" >
        <div class="row header_box">
            <a href="index.html"><img src="http://www.cqupt.edu.cn/cqupt/img/logo.png" class="pull-left logo" /></a>
            <a href="index.html"><img src="./images/acmlogo.PNG" class="pull-right logo" style="height: 60px"/></a>
        </div>

    </div>
    <div class="nav_box">
        <div class="container warp">
            <ul class="pull-left">
                <li class="ac">
                    <a href="index.html">
                        <i class="icon iconfont">&#xe606;</i>
                        ACM赛事
                    </a>
                </li>
                <li>
                    <a href="news.html">
                        <i class="icon iconfont">&#xe634;</i>
                        练习地址
                    </a>
                </li>
                <li>
                    <a href="serve.html">
                        <i class="icon iconfont">&#xe6cb;</i>
                        重邮ACM史
                    </a>
                </li>
                <li>
                    <a href="contact.html">
                        <i class="icon iconfont">&#xe605;</i>
                        ACM校赛
                    </a>
                </li>
                <li>
                    <a href="record.html">
                        <i class="icon iconfont">&#xe66c;</i>
                        管理网站
                    </a>
                </li>
                <div class="clear"></div>
            </ul>
        </div>
    </div>
</div>
<div class="container">
    <br>
    <h2 class="text-center" >创建练习地址</h2>
    <br>

    <form class="form-horizontal" role="form">
        <div class="form-group type2">
            <label for="type" class="col-sm-2 control-label">类型</label>
            <div class="col-sm-10">
                <input type="text" class="form-control type" id="type" placeholder="请输入类型">
            </div>
        </div>
        <div class="form-group name2">
            <label for="xuehao" class="col-sm-2 control-label">名称</label>
            <div class="col-sm-10">
                <input type="text" class="form-control name" id="xuehao" placeholder="请输入名称">
            </div>
        </div>
        <div class="form-group url2">
            <label for="youxiang" class="col-sm-2 control-label">网址</label>
            <div class="col-sm-10">
                <input type="text" class="form-control url" id="youxiang" placeholder="请输入网址">
            </div>
        </div>
        <div class="form-group usezhinan2">
            <label for="phone" class="col-sm-2 control-label">使用指南</label>
            <div class="col-sm-10">
                <input type="text" class="form-control usezhinan" id="phone" placeholder="请输入使用指南">
            </div>
        </div>

        <div class="form-group adminpass2">
            <label for="password" class="col-sm-2 control-label">管理员密码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control adminpass" id="password" placeholder="请输入管理员密码">
            </div>
        </div>
    </form>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-danger createlianxi">上传创建信息</button>
        </div>
    </div>
</div>


</body>
<script>
    $(".createlianxi").click(function () {
        var usezhinan = $(".usezhinan").val();
        var adminpass = $(".adminpass").val();
        var url = $(".url").val();
        var type = $(".type").val();
        var name = $(".name").val();
        var flag = 0;
        if(usezhinan===''){
            $(".usezhinan2").addClass("has-error");
            flag++;
        }else{
            $(".usezhinan2").removeClass("has-error");
        }
        if(adminpass===''){
            $(".adminpass2").addClass("has-error");
            flag++;
        }else{
            $(".adminpass2").removeClass("has-error");
        }
        if(url===''){
            $(".url2").addClass("has-error");
            flag++;
        }else{
            $(".url2").removeClass("has-error");
        }
        if(type===''){
            $(".type2").addClass("has-error");
            flag++;
        }else{
            $(".type2").removeClass("has-error");
        }
        if(name===''){
            $(".name2").addClass("has-error");
            flag++;
        }else{
            $(".name2").removeClass("has-error");
        }
        console.log(flag);
        console.log(name);
        if(flag===0){
            $.ajax({
                type:"POST",
                url:"http://acmapi.cqupt.edu.cn/api/createnewexercise/",
                data:{type:type,name:name,url:url,usezhinan:usezhinan},
                datatype: "json",
                success:function(data){
                    console.log(11111111);
                },
                complete: function(XMLHttpRequest, textStatus){
                    var tt = XMLHttpRequest.responseText;
                    var tmp = '('+tt+')';
                    console.log(tmp);
                    var json = eval(tmp);
                    console.log(json);
                    var code = json.status_code;
                    console.log(code);
                    if(code === 200){
                        window.location.href = "http://acm.cqupt.edu.cn/adminexercise.html";
                    }else{
                        alert("失败请重试");
                    }
                },
                error: function(){
                    console.log(2222222);
                }
            });
        }
    });
</script>
</html>













































